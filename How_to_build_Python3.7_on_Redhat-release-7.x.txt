■ How to build Python 3.7 on RedHat release

※ Requirement
  - up to gcc 3.4
  - up to OpenSSL 1.0.x
  
export CFLAGS="-I/usr/local/openssl_package/1.0.2/include -DOBSOLETE_LINUX_KERNEL"
export LDFLAGS="-L/usr/local/openssl_package/1.0.2/lib"
export CC="/usr/local/gcc34/bin/gcc -m32"
export CXX="/usr/local/gcc34/bin/g++"


Q1) Error
Wno-unused-parameter   -I. -I./Include   -fPIC -DPy_BUILD_CORE -o Python/pythonrun.o Python/pythonrun.c
/usr/local/gcc34/bin/gcc -pthread -c -fno-strict-aliasing -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall    -std=c99 -Wextra -Wno-unused-parameter   -I. -I./Include   -fPIC -DPy_BUILD_CORE -o Python/pytime.o Python/pytime.c
Python/pytime.c: In function `pymonotonic':
Python/pytime.c:886: error: `CLOCK_MONOTONIC' undeclared (first use in this function)
Python/pytime.c:886: error: (Each undeclared identifier is reported only once
Python/pytime.c:886: error: for each function it appears in.)
make: *** [Python/pytime.o] Error

A1) $HOME-Python_source/Python/pytime.c
--- pytime.c.bak        Fri Aug  9 09:03:58 2019
+++ pytime.c    Fri Aug  9 09:05:25 2019
@@ -857,6 +857,7 @@
                          (_PyTime_t)timebase.numer,
                          (_PyTime_t)timebase.denom);
 
+/*
 #elif defined(__hpux)
     hrtime_t time;
 
@@ -911,6 +912,7 @@
     if (pytime_fromtimespec(tp, &ts, raise) < 0) {
         return -1;
     }
+*/
 
 #endif
     return 0;

Q2) Error
/usr/local/gcc34/bin/gcc -m32 -pthread -fno-strict-aliasing -Wsign-compare -DNDEBUG -g  -O3 -Wall -I/usr/local/openssl_package/1.0.2/include -DOBSOLETE_LINUX_KERNEL -I/usr/local/openssl_package/1.0.2/include -DOBSOLETE_LINUX_KERNEL  -std=c99 -Wextra -Wno-unused-parameter   -I. -I./Include   -fPIC -DPy_BUILD_CORE_BUILTIN  -DPy_BUILD_CORE -c ./Modules/posixmodule.c -o Modules/posixmodule.o
In file included from ./Modules/posixmodule.c:97:
/usr/include/sys/sendfile.h:26:3: #error "<sys/sendfile.h> cannot be used with _FILE_OFFSET_BITS=64"

A2) $HOME-Python_source/configure
- use_lfs=yes
+ use_lfs=no